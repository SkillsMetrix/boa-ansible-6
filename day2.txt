from fastapi import FastAPI
from random import randrange
from .import schemas

app= FastAPI()

user_data=[{"id":1,"uname":"admin","email":"admin@mail.com"}]

@app.get('/loadusers')
def loadusers():
    return {'message':user_data}

@app.post('/create')
def addUser(payload: schemas.User):
    postdata= payload.model_dump()
    postdata['id']=randrange(0,1000)
    user_data.append(postdata)
    return {'userdata':postdata}

@app.get('/register')
def register():
    return {'message':'welcome to register'}
